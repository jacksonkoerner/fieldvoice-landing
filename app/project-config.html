<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Project Configuration - FieldVoice Pro</title>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-touch-icon.png">
    <meta name="theme-color" content="#0a1628">

    <!-- iOS PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FieldVoice">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="./js/config.js"></script>
    <script src="./js/storage-keys.js"></script>
    <script src="./js/supabase-utils.js"></script>
    <script src="./js/pwa-utils.js"></script>
    <script src="./js/ui-utils.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dot-navy': '#0a1628',
                        'dot-blue': '#1e3a5f',
                        'dot-slate': '#334155',
                        'dot-orange': '#ea580c',
                        'dot-yellow': '#f59e0b',
                        'safety-green': '#16a34a',
                        'dot-green': '#4a7c59',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }
        .header-stripe {
            background: repeating-linear-gradient(-45deg, #f59e0b, #f59e0b 10px, #0a1628 10px, #0a1628 20px);
            height: 4px;
            padding-top: env(safe-area-inset-top);
        }
        .drag-handle {
            cursor: grab;
            touch-action: none;
        }
        .drag-handle:active {
            cursor: grabbing;
        }
        .dragging {
            opacity: 0.5;
            background-color: #e2e8f0;
        }
        .drag-over {
            border-top: 2px solid #16a34a;
        }
        /* Import Section Styles */
        .import-section {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 2px dashed #cbd5e1;
        }
        .drop-zone {
            border: 2px dashed #94a3b8;
            border-radius: 8px;
            transition: all 0.2s ease;
            background: white;
        }
        .drop-zone.drag-active {
            border-color: #ea580c;
            background-color: #fff7ed;
            transform: scale(1.01);
        }
        .drop-zone:hover {
            border-color: #64748b;
        }
        .file-item {
            animation: slideIn 0.2s ease;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .missing-field {
            border-color: #dc2626 !important;
            background-color: #fef2f2 !important;
        }
        .missing-indicator {
            color: #dc2626;
            font-size: 11px;
            font-weight: 600;
        }
        .extraction-success-banner {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border-left: 4px solid #16a34a;
        }
        .extraction-error-banner {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            border-left: 4px solid #dc2626;
        }
        .extraction-notes {
            background: #fffbeb;
            border: 1px solid #fde68a;
        }
        .spin-animation {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        /* Logo Upload Styles */
        .logo-drop-zone {
            border: 2px dashed #94a3b8;
            border-radius: 8px;
            transition: all 0.2s ease;
            background: #f8fafc;
            cursor: pointer;
        }
        .logo-drop-zone.drag-active {
            border-color: #ea580c;
            background-color: #fff7ed;
            transform: scale(1.01);
        }
        .logo-drop-zone:hover {
            border-color: #64748b;
            background-color: #f1f5f9;
        }
        .logo-preview-container {
            position: relative;
            display: inline-block;
        }
        .logo-preview-container img {
            max-height: 150px;
            max-width: 100%;
            object-fit: contain;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
        }
        .logo-remove-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #dc2626;
            color: white;
            border: 2px solid white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: background 0.2s;
        }
        .logo-remove-btn:hover {
            background: #b91c1c;
        }
    </style>
</head>
<body class="bg-slate-100 min-h-screen">
    <div class="header-stripe"></div>

    <!-- Unsaved Changes Banner -->
    <div id="dirtyBanner" class="hidden bg-dot-orange text-white">
        <div class="max-w-lg mx-auto px-4 py-3 flex items-center gap-3">
            <i class="fas fa-exclamation-circle"></i>
            <p class="flex-1 text-sm font-medium">You have unsaved changes â€” click Save before leaving</p>
        </div>
    </div>

    <div class="max-w-lg mx-auto min-h-screen flex flex-col">

        <!-- HEADER -->
        <header class="bg-dot-navy text-white p-4">
            <div class="flex items-center gap-4">
                <a href="projects.html" class="w-10 h-10 flex items-center justify-center border border-slate-600 hover:bg-slate-800 transition-colors">
                    <i class="fas fa-arrow-left text-slate-400"></i>
                </a>
                <div>
                    <p class="text-[10px] font-bold text-dot-yellow uppercase tracking-widest">Project Setup</p>
                    <h1 class="text-xl font-bold">Project Configuration</h1>
                </div>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main class="flex-1 p-4 space-y-4">

            <!-- PROJECT DETAILS FORM -->
            <div id="projectFormContainer" class="space-y-4">

                <!-- Active Project Indicator -->
                <div id="activeProjectBadge" class="hidden bg-safety-green text-white p-3 flex items-center gap-2">
                    <i class="fas fa-check-circle"></i>
                    <span class="text-sm font-bold uppercase">Active Project</span>
                </div>

                <!-- Import from Existing Report Section -->
                <section class="import-section p-4 rounded-lg">
                    <div class="mb-4">
                        <h2 class="text-sm font-bold text-dot-navy uppercase tracking-wider flex items-center gap-2 mb-2">
                            <i class="fas fa-file-import text-dot-orange"></i>
                            Import from Existing Report
                        </h2>
                        <p class="text-xs text-slate-600">Upload one or more RPR Daily Reports to automatically extract project details and contractors.</p>
                    </div>

                    <!-- Success/Error Banners -->
                    <div id="extractionSuccessBanner" class="hidden extraction-success-banner p-3 mb-4 rounded">
                        <div class="flex items-start gap-2">
                            <i class="fas fa-check-circle text-safety-green mt-0.5"></i>
                            <div>
                                <p class="text-sm font-bold text-green-800">Project data extracted!</p>
                                <p class="text-xs text-green-700">Please review and make any corrections before saving.</p>
                            </div>
                        </div>
                    </div>

                    <div id="extractionErrorBanner" class="hidden extraction-error-banner p-3 mb-4 rounded">
                        <div class="flex items-start gap-2">
                            <i class="fas fa-exclamation-circle text-red-600 mt-0.5"></i>
                            <div>
                                <p class="text-sm font-bold text-red-800">Extraction failed</p>
                                <p id="extractionErrorMessage" class="text-xs text-red-700"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Drop Zone -->
                    <div id="dropZone" class="drop-zone p-6 text-center cursor-pointer" onclick="document.getElementById('fileInput').click()">
                        <input type="file" id="fileInput" class="hidden" accept=".pdf,.docx" multiple onchange="handleFileSelect(event)">
                        <i class="fas fa-cloud-upload-alt text-4xl text-slate-400 mb-3"></i>
                        <p class="text-sm font-medium text-slate-600 mb-1">Drag and drop files here</p>
                        <p class="text-xs text-slate-500 mb-3">or</p>
                        <button type="button" onclick="event.stopPropagation(); document.getElementById('fileInput').click();" class="px-4 py-2 bg-dot-blue hover:bg-blue-800 text-white text-sm font-bold uppercase transition-colors">
                            <i class="fas fa-folder-open mr-2"></i>Browse Files
                        </button>
                        <p class="text-xs text-slate-400 mt-3">Accepts PDF and DOCX files</p>
                    </div>

                    <!-- Selected Files List -->
                    <div id="selectedFilesList" class="hidden mt-4">
                        <p class="text-xs font-bold text-slate-600 uppercase tracking-wider mb-2">Selected Files:</p>
                        <div id="filesContainer" class="space-y-2">
                            <!-- Files will be rendered here -->
                        </div>
                    </div>

                    <!-- Extract Button -->
                    <button id="extractBtn" onclick="extractProjectData()" class="hidden w-full mt-4 p-3 bg-dot-orange hover:bg-orange-700 text-white font-bold uppercase transition-colors flex items-center justify-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed">
                        <i id="extractBtnIcon" class="fas fa-magic"></i>
                        <span id="extractBtnText">Extract Project Data</span>
                    </button>

                    <!-- Extraction Notes (collapsible) -->
                    <div id="extractionNotesSection" class="hidden mt-4">
                        <button onclick="toggleExtractionNotes()" class="w-full text-left extraction-notes p-3 rounded flex items-center justify-between">
                            <span class="text-xs font-bold text-yellow-800 uppercase tracking-wider">
                                <i class="fas fa-info-circle mr-1"></i>
                                Extraction Notes
                            </span>
                            <i id="notesToggleIcon" class="fas fa-chevron-down text-yellow-700 text-xs transition-transform"></i>
                        </button>
                        <div id="extractionNotesContent" class="hidden bg-yellow-50 p-3 border border-t-0 border-yellow-200 rounded-b text-xs text-yellow-800">
                            <ul id="extractionNotesList" class="space-y-1 list-disc list-inside">
                                <!-- Notes will be rendered here -->
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Project Details -->
                <section class="bg-white border-2 border-slate-200">
                    <div class="bg-dot-navy text-white p-4">
                        <h2 class="text-sm font-bold uppercase tracking-wider flex items-center gap-2">
                            <i class="fas fa-building text-dot-yellow"></i>
                            Project Details
                        </h2>
                    </div>
                    <div class="p-4 space-y-4">
                        <!-- Project Logo Upload -->
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Project Logo</label>
                            <div id="logoUploadZone" class="logo-drop-zone mt-2 p-4 text-center" onclick="document.getElementById('logoInput').click()">
                                <input type="file" id="logoInput" class="hidden" accept="image/png,image/jpeg,image/jpg,image/svg+xml,image/gif" onchange="handleLogoSelect(event)">
                                <i class="fas fa-image text-2xl text-slate-400 mb-2"></i>
                                <p class="text-xs text-slate-600">Drag & drop or click to upload</p>
                                <p class="text-xs text-slate-400 mt-1">PNG, JPG, SVG, GIF</p>
                            </div>
                            <div id="logoPreviewArea" class="hidden mt-2">
                                <div class="logo-preview-container">
                                    <img id="logoPreviewImg" src="" alt="Project Logo">
                                    <button type="button" onclick="removeLogo()" class="logo-remove-btn" title="Remove logo">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Project Name <span class="text-red-500">*</span></label>
                            <input type="text" id="projectName" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., I-10 Bridge Reconstruction">
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">NOAB Project No.</label>
                                <input type="text" id="noabProjectNo" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., 1291">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">CNO Solicitation No.</label>
                                <input type="text" id="cnoSolicitationNo" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="N/A" value="N/A">
                            </div>
                        </div>
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Location</label>
                            <input type="text" id="location" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., Jefferson Highway at Mississippi River">
                        </div>
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Engineer (Firm)</label>
                            <input type="text" id="engineer" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., AECOM">
                        </div>
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Prime Contractor Name</label>
                            <input type="text" id="primeContractor" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., Boh Bros Construction">
                        </div>
                    </div>
                </section>

                <!-- Contract Information -->
                <section class="bg-white border-2 border-slate-200">
                    <div class="bg-dot-blue text-white p-4">
                        <h2 class="text-sm font-bold uppercase tracking-wider flex items-center gap-2">
                            <i class="fas fa-file-contract"></i>
                            Contract Information
                        </h2>
                    </div>
                    <div class="p-4 space-y-4">
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Notice to Proceed Date</label>
                            <input type="date" id="noticeToProceed" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue">
                        </div>
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Report Date (Sample)</label>
                            <input type="date" id="reportDate" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue">
                        </div>
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Duration (Days)</label>
                            <input type="number" id="contractDuration" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., 467">
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Weather Days</label>
                                <input type="number" id="weatherDays" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="0" value="0" min="0">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Contract Day #</label>
                                <input type="number" id="contractDayNo" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., 19">
                            </div>
                        </div>
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Expected Completion Date</label>
                            <input type="date" id="expectedCompletion" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue">
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Default Start Time</label>
                                <input type="time" id="defaultStartTime" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" value="06:00">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Default End Time</label>
                                <input type="time" id="defaultEndTime" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" value="16:00">
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Contractor Roster -->
                <section class="bg-white border-2 border-slate-200">
                    <div class="bg-dot-orange text-white p-4">
                        <h2 class="text-sm font-bold uppercase tracking-wider flex items-center gap-2">
                            <i class="fas fa-hard-hat"></i>
                            Contractor Roster
                        </h2>
                    </div>
                    <div id="contractorList" class="divide-y divide-slate-200">
                        <!-- Contractors will be rendered here -->
                    </div>
                    <div class="p-4 border-t border-slate-200">
                        <button onclick="showAddContractorForm()" class="w-full p-3 bg-dot-orange hover:bg-orange-700 text-white font-bold uppercase transition-colors flex items-center justify-center gap-2 text-sm">
                            <i class="fas fa-plus"></i>
                            Add Contractor
                        </button>
                    </div>
                </section>

                <!-- Add Contractor Form (hidden by default) -->
                <section id="addContractorForm" class="hidden bg-white border-2 border-dot-orange">
                    <div class="bg-dot-orange/10 p-4 border-b border-dot-orange">
                        <h3 class="text-sm font-bold text-dot-orange uppercase tracking-wider flex items-center gap-2">
                            <i class="fas fa-user-plus"></i>
                            <span id="contractorFormTitle">Add New Contractor</span>
                        </h3>
                    </div>
                    <div class="p-4 space-y-4">
                        <input type="hidden" id="editContractorId">
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Full Name <span class="text-red-500">*</span></label>
                            <input type="text" id="contractorName" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., Boh Bros Construction">
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Abbreviation <span class="text-red-500">*</span></label>
                                <input type="text" id="contractorAbbr" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue uppercase" placeholder="e.g., BOH" maxlength="10">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Type <span class="text-red-500">*</span></label>
                                <select id="contractorType" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue">
                                    <option value="prime">Prime</option>
                                    <option value="subcontractor">Subcontractor</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="text-xs font-bold text-dot-blue uppercase tracking-wider">Trades</label>
                            <input type="text" id="contractorTrades" class="w-full mt-2 bg-white border-2 border-slate-300 px-4 py-3 text-sm text-slate-800 focus:outline-none focus:border-dot-blue" placeholder="e.g., Pile Driving; Utilities; Concrete Pvmt">
                            <p class="text-xs text-slate-500 mt-1">Separate multiple trades with semicolons</p>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="saveContractor()" class="flex-1 p-3 bg-safety-green hover:bg-green-700 text-white font-bold uppercase transition-colors text-sm">
                                <i class="fas fa-save mr-2"></i>Save
                            </button>
                            <button onclick="hideAddContractorForm()" class="flex-1 p-3 bg-slate-400 hover:bg-slate-500 text-white font-bold uppercase transition-colors text-sm">
                                Cancel
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Save/Delete Project Actions -->
                <div class="space-y-3">
                    <button onclick="saveProject()" class="w-full p-4 bg-safety-green hover:bg-green-700 text-white font-bold uppercase transition-colors flex items-center justify-center gap-2">
                        <i class="fas fa-save"></i>
                        Save Project
                    </button>
                    <button onclick="cancelEdit()" class="w-full p-3 bg-slate-300 hover:bg-slate-400 text-slate-700 font-bold uppercase transition-colors flex items-center justify-center gap-2 text-sm">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                    <!-- Delete Project Button (only shown when editing existing project) -->
                    <button id="deleteProjectBtn" onclick="showDeleteProjectModal()" class="hidden w-full p-3 bg-red-600 hover:bg-red-700 text-white font-bold uppercase transition-colors flex items-center justify-center gap-2 text-sm">
                        <i class="fas fa-trash-alt"></i>
                        Delete Project
                    </button>
                </div>

            </div>

        </main>

        <!-- FOOTER -->
        <footer class="bg-dot-navy text-center py-3">
            <p class="text-[10px] text-slate-500 uppercase tracking-widest">
                <i class="fas fa-shield-alt mr-1"></i>
                DOT Compliant Field Documentation System
            </p>
        </footer>
    </div>

    <!-- Delete Confirmation Modal (for contractors) -->
    <div id="deleteModal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white max-w-sm w-full p-6 shadow-xl">
            <div class="text-center">
                <div class="w-16 h-16 bg-red-100 flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800 mb-2">Confirm Delete</h3>
                <p id="deleteModalMessage" class="text-sm text-slate-600 mb-6">Are you sure you want to delete this item?</p>
                <div class="flex gap-3">
                    <button onclick="confirmDelete()" class="flex-1 p-3 bg-red-600 hover:bg-red-700 text-white font-bold uppercase transition-colors text-sm">
                        Delete
                    </button>
                    <button onclick="closeDeleteModal()" class="flex-1 p-3 bg-slate-300 hover:bg-slate-400 text-slate-700 font-bold uppercase transition-colors text-sm">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Project Confirmation Modal -->
    <div id="deleteProjectModal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
        <div class="bg-white max-w-sm w-full p-6 shadow-xl">
            <div class="text-center">
                <div class="w-16 h-16 bg-red-100 flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-trash-alt text-red-600 text-2xl"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800 mb-2">Delete Project</h3>
                <p class="text-sm text-slate-600 mb-2">Are you sure you want to delete</p>
                <p id="deleteProjectName" class="text-base font-bold text-red-600 mb-2">"Project Name"</p>
                <p class="text-sm text-slate-600 mb-6">This will permanently delete the project and all its contractors. This cannot be undone.</p>
                <div class="flex gap-3">
                    <button id="confirmDeleteProjectBtn" onclick="confirmDeleteProject()" class="flex-1 p-3 bg-red-600 hover:bg-red-700 text-white font-bold uppercase transition-colors text-sm flex items-center justify-center gap-2">
                        <i id="deleteProjectBtnIcon" class="fas fa-trash-alt"></i>
                        <span id="deleteProjectBtnText">Delete</span>
                    </button>
                    <button onclick="closeDeleteProjectModal()" class="flex-1 p-3 bg-slate-300 hover:bg-slate-400 text-slate-700 font-bold uppercase transition-colors text-sm">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>


    <script src="./js/indexeddb-utils.js"></script>
    <script src="./js/data-layer.js"></script>
    <script src="./js/media-utils.js"></script>
    <script src="./js/project-config.js"></script>

    <!-- Offline Banner -->
    <div id="offline-banner" class="fixed top-0 left-0 right-0 bg-yellow-500 text-yellow-900 text-center py-2 px-4 font-bold text-sm z-[9999] transform -translate-y-full transition-transform duration-300" style="display: none;">
        <i class="fas fa-wifi-slash mr-2"></i>You are offline - Some features may be unavailable
    </div>

    <!-- Initialize PWA features -->
    <script>initPWA();</script>
</body>
</html>
